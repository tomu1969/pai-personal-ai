<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Talking Chess</title>
  <meta name="description" content="Chess game with ELO-based opponent matching">
  <link rel="icon" href="favicon.svg" type="image/svg+xml">
  
  <!-- External CSS -->
  <link rel="stylesheet" href="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.css">
  
  <!-- Custom CSS -->
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div id="app">
    <header>
      <h1>Talking Chess</h1>
      <p class="subtitle">Play chess against an AI opponent matched to your skill level</p>
    </header>
    
    <!-- Header Bar -->
    <div id="header-bar">
      <div class="player-section">
        <span class="player-icon">ğŸ‘¤</span>
        <span class="player-info">
          You: <input type="number" id="user-elo-input" min="800" max="3000" value="1500" class="elo-input">
          <button class="elo-adjust" data-type="user" data-delta="-100">âˆ’</button>
          <button class="elo-adjust" data-type="user" data-delta="+100">+</button>
        </span>
      </div>
      
      <div class="center-section">
        <div class="material-advantage">
          <span class="material-icon">âš”ï¸</span>
          <span id="material-status">Material: Even</span>
        </div>
        <div class="timer-display">
          <span class="timer-icon">â±ï¸</span>
          <span id="timer-display">00:00</span>
        </div>
        <div class="game-controls">
          <button id="new-game-btn-header" class="header-button primary-button">New Game</button>
          <button id="flip-board-btn-header" class="header-button secondary-button">Flip</button>
          <button id="toggle-highlights-btn" class="header-button secondary-button" title="Toggle move highlights">
            <span class="btn-icon">ğŸ¯</span>
            <span id="highlight-toggle-text">Highlights On</span>
          </button>
        </div>
      </div>
      
      <div class="ai-section">
        <span class="ai-info">
          <input type="number" id="ai-elo-input" min="800" max="3000" value="1650" class="elo-input">
          <button class="strength-adjust" data-delta="-20">âˆ’</button>
          <span id="strength-display">+10%</span>
          <button class="strength-adjust" data-delta="+20">+</button>
        </span>
        <span class="ai-icon">ğŸ¤–</span>
        <span class="ai-name">ChessBot</span>
      </div>
    </div>

    <main>
      <section id="game-section">
        <!-- Board Column -->
        <div id="board-column">
          <div id="board-container">
            <div id="chessboard"></div>
          </div>
          
          <div id="board-info">
            <div id="turn-indicator" class="turn-indicator white-turn">
              <span class="piece-icon">â™”</span>
              <span id="turn-text">White to move</span>
            </div>
            <div id="move-counter">Move <span id="move-number">1</span></div>
          </div>
          
        </div>
        
        <!-- Chat Column -->
        <div id="chat-column">
          <div id="chat-header">
            <span class="chat-icon">ğŸ’¬</span>
            <span class="chat-title">Chat</span>
          </div>
          
          <div id="chat-messages">
            <!-- Messages will be dynamically added here -->
          </div>
          
          <div id="chat-input-section">
            <div id="quick-responses">
              <button class="quick-response" data-message="Good move!">Good move!</button>
              <button class="quick-response" data-message="Nice!">Nice!</button>
              <button class="quick-response" data-message="Thinking...">Thinking...</button>
              <button class="quick-response" data-message="Well played">Well played</button>
              <button class="quick-response" data-message="Thanks">Thanks</button>
              <button class="quick-response" data-message="Good game">Good game</button>
            </div>
            
            <div id="chat-input-container">
              <input type="text" id="chat-input" placeholder="Type a message..." maxlength="200">
              <button id="send-message-btn">Send</button>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Status Bar -->
    <div id="status-bar">
      <div id="move-history-status">
        <span class="status-icon">ğŸ“‹</span>
        <span id="pgn-status">Ready to play</span>
      </div>
      
      <div id="captured-status">
        <span class="status-icon">âš”ï¸</span>
        <span>Captured: </span>
        <span id="captured-pieces-status">None yet</span>
      </div>
      
      <div id="opening-status">
        <span class="status-icon">ğŸ“–</span>
        <span id="opening-name">Opening: Starting position</span>
      </div>
    </div>
    
    <footer>
      <p>&copy; 2024 Talking Chess. Built with Chess.js and Stockfish.</p>
    </footer>
  </div>

  <!-- Loading indicator -->
  <div id="loading" class="hidden">
    <div class="loading-spinner"></div>
    <p>Loading chess engine...</p>
  </div>

  <!-- Error messages -->
  <div id="error-container" class="hidden">
    <div class="error-message">
      <h3>Error</h3>
      <p id="error-text"></p>
      <button onclick="location.reload()">Reload Page</button>
    </div>
  </div>

  <!-- External JavaScript Libraries -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.3/chess.min.js"></script>
  <script src="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.js"></script>
  
  <!-- Application JavaScript -->
  <script src="elo-calculator.js"></script>
  <script src="engine-config.js"></script>
  <script src="stockfish-engine.js"></script>
  <script src="chat-engine.js"></script>
  <script src="app-fresh.js?v=8"></script>
</body>
</html>